<div class="admin-dashboard">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-left">
      <button class="menu-toggle" aria-label="Menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
      <h1>SMS2I</h1>
    </div>
    <div class="header-right">
<div class="notif-icon" style="position: relative;" (click)="showDropdown = !showDropdown">
  <span class="badge" *ngIf="unseenCount > 0">{{ unseenCount }}</span>
  <svg viewBox="0 0 24 24" style="cursor: pointer;">
    <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5S10.5 3.17 10.5 4v.68C7.64 5.36 6 7.93 6 11v5l-2 2v1h16v-1l-2-2z"/>
  </svg>

  <!-- Menu d√©roulant -->
  <div *ngIf="showDropdown" class="notif-dropdown">
    <div *ngIf="notifications.length > 0; else noNotif">
      <div *ngFor="let notif of notifications" (click)="markNotificationAsSeen(notif)" class="notif-item">
        <span class="notif-message">{{ notif.message }}</span>
        <span class="notif-date">{{ notif.createdAt | date:'short' }}</span>
      </div>
    </div>
    <ng-template #noNotif>
      <div class="notif-item">Aucune nouvelle notification</div>
    </ng-template>
  </div>
</div>
      <div class="user-profile">
        <span class="username">{{ adminName }}</span>
        <svg class="dropdown-arrow" viewBox="0 0 24 24">
          <path d="M7 10l5 5 5-5z"/>
        </svg>
        <button (click)="logout()" class="logout-btn" title="D√©connexion">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path d="M16 13v-2H7V8l-5 4 5 4v-3h9zm3-10H5c-1.1 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Sidebar -->
  <aside class="dashboard-sidebar">
    <nav>
      <ul>
        <li class="active">
          <a href="Admin">
            <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            <span>Dashboard</span>
          </a>
        </li>
        <li>
          <a href="/gestionuser">
            <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <span>Utilisateurs</span>
          </a>
        </li>
        <li>
          <a href="/viewprojet">
            <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
            <span>Gestion des Projets</span>
          </a>
        </li>
        <li>
          <a href="viewgalerie">
            <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/></svg>
            <span>Galerie</span>
          </a>
        </li>
        <li>
          <a href="viewformation">
            <svg viewBox="0 0 24 24"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM13 20.01L4 11V4h7v-.01l9 9-7 7.02z"/><circle cx="6.5" cy="6.5" r="1.5"/></svg>
            <span>Les Demandes PFE</span>
          </a>
        </li>
        <li>
          <a href="viewinscription">
            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.31-8.86c-1.77-.45-2.34-.94-2.34-1.67 0-.84.79-1.43 2.1-1.43 1.38 0 1.9.66 1.94 1.64h1.71c-.05-1.34-.87-2.57-2.49-2.97V5H10.9v1.69c-1.51.32-2.72 1.3-2.72 2.81 0 1.79 1.49 2.69 3.66 3.21 1.95.46 2.34 1.15 2.34 1.87 0 .53-.39 1.39-2.1 1.39-1.6 0-2.23-.72-2.32-1.64H8.04c.1 1.7 1.36 2.66 2.86 2.97V19h2.34v-1.67c1.52-.29 2.72-1.16 2.73-2.77-.01-2.2-1.9-2.96-3.66-3.42z"/></svg>
            <span>Les Inscriptions PFE</span>
          </a>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="dashboard-main">
    <!-- Welcome Section -->
<div class="welcome-section">
  <div class="welcome-card">
    <div class="welcome-content">
      <h2>Bonjour, {{ adminName }}! <span class="welcome-emoji">üëã</span></h2>
      <p class="welcome-message">
        Nous sommes ravis de vous revoir. Votre journ√©e commence sous les meilleurs auspices !
      </p>
      <p class="date-info">
        Aujourd'hui, nous sommes le {{ currentDate | date:'fullDate' }}
      </p>
    </div>
    <div class="welcome-illustration">
      <svg viewBox="0 0 500 300">
        <path d="M50,150 Q150,50 250,150 T450,150" fill="none" stroke="#4e73df" stroke-width="3"/>
        <circle cx="50" cy="150" r="8" fill="#4e73df"/>
        <circle cx="250" cy="150" r="8" fill="#4e73df"/>
        <circle cx="450" cy="150" r="8" fill="#4e73df"/>
      </svg>
    </div>
  </div>
</div>
    <!-- Quick Stats -->
    <div class="quick-stats">
      <div class="stat-card motivation-card">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
        </div>
        <div class="stat-content">
          <h3>Votre impact aujourd'hui</h3>
          <p>Chaque action que vous entreprenez fait une diff√©rence pour nos utilisateurs.</p>
        </div>
      </div>

<div class="stat-card weather-card">
  <div class="stat-icon">
    <ng-container *ngIf="weatherIconUrl; else fallbackIcon">
      <img [src]="weatherIconUrl" alt="M√©t√©o" width="48" height="48" />
    </ng-container>
    <ng-template #fallbackIcon>
      <svg viewBox="0 0 24 24" width="48" height="48" fill="#4e73df">
        <path d="M6 14l3 3v5h6v-5l3-3V9H6v5zm2-3h8v2.17l-3 3V20h-2v-3.83l-3-3V11zm3-9h2v3h-2zM3.502 5.874L4.916 4.46l2.122 2.12-1.414 1.415zm13.458.708l2.123-2.12 1.413 1.416-2.123 2.12z"/>
      </svg>
    </ng-template>
  </div>
  <div class="stat-content">
    <h3>M√©t√©o du jour</h3>
    <p>{{ weatherText }}</p>
  </div>
</div>
    </div>

    <!-- Personalized Content -->
    <div class="personalized-content">
      <div class="content-card quote-card">
        <div class="card-header">
          <h3>Citation inspirante</h3>
        </div>
        <div class="card-body">
          <blockquote>
            "L'excellence n'est pas un acte, mais une habitude. Vous √™tes ce que vous faites de mani√®re r√©p√©t√©e."
            <footer>- Aristote</footer>
          </blockquote>
        </div>
      </div>

      <div class="content-card tips-card">
        <div class="card-header">
          <h3>Conseil du jour</h3>
        </div>
        <div class="card-body">
          <p>Prenez 5 minutes pour planifier votre journ√©e - cela peut vous faire gagner des heures de travail.</p>
          <div class="tip-actions">
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Activity -->
<div class="recent-activity">
  <div class="card">
    <div class="card-header">
      <h2>Les Notifications</h2>
      <a href="#" class="view-all">Voir tout</a>
    </div>
    <div class="card-body">

      <div *ngIf="allNotifications.length > 0; else noActivity">
        <div class="activity-item" *ngFor="let notif of allNotifications">
          <div class="activity-avatar" [style.background-color]="notif.seen ? '#ccc' : '#4e73df'">üîî</div>
          <div class="activity-content">
            <div class="activity-meta">
              <span class="activity-user">{{ notif.type | titlecase }}</span>
              <span class="activity-time">{{ notif.createdAt | date:'short' }}</span>
            </div>
          <p class="activity-text" [ngClass]="{ 'unseen': !notif.seen }">{{ notif.message }}</p>
          </div>
        </div>
      </div>

      <ng-template #noActivity>
        <p>Aucune activit√© r√©cente</p>
      </ng-template>

    </div>
  </div>
</div>


